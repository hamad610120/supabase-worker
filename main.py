# main.py
import time
from behavior_reader import read_behavior_data
from ai_recommendations import generate_recommendations
from display_manager import update_display_table
from ai_prediction_engine import process_all_predictions   # โ ๐ฅ ุฅุถุงูุฉ ุงูุฐูุงุก ุงูุฌุฏูุฏ

def run_full_cycle():
    """
    ุฏูุฑุฉ ุงููุธุงู ุงูุฐูู ุงููุงููุฉ:
    1. ูุฑุงุกุฉ ุงูุณููู
    2. ุฅูุดุงุก ุงูุชูุตูุงุช ุงูุชูููุฏูุฉ
    3. ุฅูุดุงุก ุงูุชููุนุงุช ุงูุฐููุฉ AI Predictions
    4. ุชุญุฏูุซ ุฌุฏูู ุงูุนุฑุถ ุงูููุงุฆู
    """
    print("\n๐ ุจุฏุก ุฏูุฑุฉ ุฌุฏูุฏุฉ ูููุธุงู ุงูุฐูู...\n")
    time.sleep(1)

    # 1๏ธโฃ ูุฑุงุกุฉ ุจูุงูุงุช ุงูุณููู
    print("๐ ุงูุฎุทูุฉ 1: ูุฑุงุกุฉ ุจูุงูุงุช ุงูุณููู...")
    behaviors = read_behavior_data()
    print(f"โ ุชู ุฌูุจ {len(behaviors)} ุณุฌู ูู ุฌุฏูู ุงูุณููู.\n")

    # 2๏ธโฃ ุฅูุดุงุก ุงูุชูุตูุงุช ุงูุชูููุฏูุฉ ุงููุฏููุฉ (ุงุฎุชูุงุฑู)
    print("๐ง ุงูุฎุทูุฉ 2: ุฅูุดุงุก ุงูุชูุตูุงุช ุงูุชูููุฏูุฉ...")
    generate_recommendations()
    print("โ ุชู ุฅูุดุงุก ุงูุชูุตูุงุช ุงูุชูููุฏูุฉ.\n")

    # 3๏ธโฃ ุงูุฐูุงุก ุงูุตูุงุนู โ ุฅูุดุงุก 9 ูุฌููุนุงุช ุชููุนุงุช ูุงููุฉ
    print("๐ค ุงูุฎุทูุฉ 3: ุฅูุดุงุก ุชููุนุงุช ุงูุฐูุงุก ุงูุตูุงุนู ุงููุชูุฏูุฉ...")
    process_all_predictions()     # โ ๐ฅ ุฃูู ุฎุทูุฉ
    print("๐ ุชู ุฅูุดุงุก ุฌููุน ุงูุชููุนุงุช ุงูุฐููุฉ AI ุจูุฌุงุญ.\n")

    # 4๏ธโฃ ุชุญุฏูุซ ุฌุฏูู ุงูุนุฑุถ ุงูููุงุฆู
    print("๐จ ุงูุฎุทูุฉ 4: ุชุญุฏูุซ ุฌุฏูู ุงูุนุฑุถ ุงูููุงุฆู...")
    update_display_table()
    print("โ ุชู ุชุญุฏูุซ ุฌุฏูู ุงูุนุฑุถ ุงูููุงุฆู.\n")

    print("๐ ุงูุชููุช ุฏูุฑุฉ ุงููุธุงู ุจูุฌุงุญ! โ")
    print("------------------------------------------------------")

if __name__ == "__main__":
    print("โ๏ธ ุชุดุบูู ุงููุธุงู ุงูุฐูู ูู ูุถุน ุงูุชูุฑุงุฑ ุงูุชููุงุฆู ูู 5 ุฏูุงุฆู...\n")
    
    while True:
        run_full_cycle()
        print("โณ ุงูุชุธุงุฑ 5 ุฏูุงุฆู ูุจู ุงูุฏูุฑุฉ ุงูุชุงููุฉ...\n")
        time.sleep(300)  # โ 300 ุซุงููุฉ = 5 ุฏูุงุฆู
